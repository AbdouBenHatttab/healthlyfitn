# # # spring:
# # #   application:
# # #     name: notification-service
# # #   data:
# # #     mongodb:
# # #       database: health_notification_db

# # # fcm:
# # #   credentials:
# # #     path: firebase-service-account.json  # ✅ Fichier JSON Firebase


# # #   # Thymeleaf pour les templates
# # #   thymeleaf:
# # #     cache: false
# # #     prefix: classpath:/templates/
# # #     suffix: .html

# # # # Port du service
# # # server:
# # #   port: ${SERVER_PORT:8084}

# # # # URL du frontend
# # # app:
# # #   frontend:
# # #     url: ${FRONTEND_URL:http://localhost:4200}

# # # # Eureka Client
# # # eureka:
# # #   client:
# # #     service-url:
# # #       defaultZone: ${EUREKA_SERVER:http://localhost:8761/eureka/}
# # #     register-with-eureka: true
# # #     fetch-registry: true
# # #   instance:
# # #     prefer-ip-address: true
# # #     instance-id: ${spring.application.name}:${random.value}

# # # # Resilience4j Circuit Breaker
# # # resilience4j:
# # #   circuitbreaker:
# # #     instances:
# # #       emailService:
# # #         register-health-indicator: true
# # #         sliding-window-size: 10
# # #         minimum-number-of-calls: 5
# # #         permitted-number-of-calls-in-half-open-state: 3
# # #         automatic-transition-from-open-to-half-open-enabled: true
# # #         wait-duration-in-open-state: 10s
# # #         failure-rate-threshold: 50
# # #         record-exceptions:
# # #           - org.springframework.mail.MailException
# # #           - jakarta.mail.MessagingException

# # # # Actuator
# # # management:
# # #   endpoints:
# # #     web:
# # #       exposure:
# # #         include: health,info,metrics,circuitbreakers
# # #   endpoint:
# # #     health:
# # #       show-details: always
# # #   health:
# # #     circuitbreakers:
# # #       enabled: true

# # # # Logging
# # # logging:
# # #   level:
# # #     com.healthapp.notification: DEBUG
# # #     org.springframework.mail: DEBUG
# # #   pattern:
# # #     console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"



# # spring:
# #   application:
# #     name: notification-service
# #   data:
# #     mongodb:
# #       uri: mongodb://localhost:27017/health_notification_db


# #   thymeleaf:
# #     cache: false
# #     prefix: classpath:/templates/
# #     suffix: .html

# # server:
# #   port: 8084

# # # ✅ Configuration Firebase FCM
# # fcm:
# #   credentials:
# #     path: firebase-service-account.json  # Fichier dans src/main/resources/

# # notification:
# #   admin-email: admin@healthapp.com

# # app:
# #   frontend:
# #     url: http://localhost:4200

# # eureka:
# #   client:
# #     service-url:
# #       defaultZone: http://localhost:8761/eureka/
# #     register-with-eureka: true
# #     fetch-registry: true
# #   instance:
# #     prefer-ip-address: true
# #     instance-id: ${spring.application.name}:${random.value}

# # management:
# #   endpoints:
# #     web:
# #       exposure:
# #         include: health,info,metrics,circuitbreakers
# #   endpoint:
# #     health:
# #       show-details: always

# # logging:
# #   level:
# #     com.healthapp.notification: DEBUG
# #   pattern:
# #     console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"


# spring:
#   data:
#     mongodb:
#       uri: mongodb://localhost:27017/health_notification_db

#   cloud:
#     config:
#       enabled: false
#   main:
#     allow-bean-definition-overriding: true


#   # ✅ Configuration Email avec Gmail
#   mail:
#     host: smtp.gmail.com
#     port: 587
#     username: healthapp.healthyfittn@gmail.com
#     password: hpfk vmdf ptif kuod
#     properties:
#       mail:
#         smtp:
#           auth: true
#           starttls:
#             enable: true
#             required: true
#           debug: true
#           ssl:
#             trust: smtp.gmail.com
#         transport:
#           protocol: smtp
#     test-connection: false
  


#   thymeleaf:
#     cache: false
#     prefix: classpath:/templates/
#     suffix: .html

# server:
#   port: 8084

# # ✅ Configuration Firebase FCM (pour les notifications push)
# fcm:
#   credentials:
#     path: firebase-service-account.json

# notification:
#   admin-email: admin@healthapp.com

# app:
#   frontend:
#     url: http://localhost:4200

# eureka:
#   client:
#     service-url:
#       defaultZone: ${EUREKA_SERVER:http://localhost:8761/eureka/}
#     register-with-eureka: true
#     fetch-registry: true
#   instance:
#     prefer-ip-address: true
#     instance-id: ${spring.application.name}:${random.value}

# management:
#   endpoints:
#     web:
#       exposure:
#         include: health,info,metrics,circuitbreakers
#   endpoint:
#     health:
#       show-details: always

# logging:
#   level:
#     com.healthapp.notification: DEBUG
#   pattern:
#     console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"


spring:
  application:
    name: notification-service

  data:
    mongodb:
      uri: mongodb://localhost:27017/health_notification_db

  cloud:
    config:
      enabled: false

  main:
    allow-bean-definition-overriding: true

  mail:
    host: smtp.gmail.com
    port: 587
    username: healthapp.healthyfittn@gmail.com
    password: hpfk vmdf ptif kuod
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          debug: true
          ssl:
            trust: smtp.gmail.com
        transport:
          protocol: smtp
    test-connection: false

  thymeleaf:
    cache: false
    prefix: classpath:/templates/
    suffix: .html

server:
  port: 8084

fcm:
  credentials:
    path: firebase-service-account.json

notification:
  admin-email: admin@healthapp.com

app:
  frontend:
    url: http://localhost:4200

eureka:
  client:
    service-url:
      defaultZone: ${EUREKA_SERVER:http://localhost:8761/eureka/}
    register-with-eureka: true
    fetch-registry: true
  instance:
    prefer-ip-address: true
    instance-id: "${spring.application.name}-${random.uuid}"

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,circuitbreakers
  endpoint:
    health:
      show-details: always

logging:
  level:
    com.healthapp.notification: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
